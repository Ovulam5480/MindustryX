From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Tue, 26 Mar 2024 19:22:00 +0800
Subject: [PATCH] API: RenderExt

---
 core/src/mindustry/core/Renderer.java       |  3 ++-
 core/src/mindustryX/Hooks.java              |  5 +++++
 core/src/mindustryX/features/RenderExt.java | 21 +++++++++++++++++++++
 3 files changed, 28 insertions(+), 1 deletion(-)
 create mode 100644 core/src/mindustryX/features/RenderExt.java

diff --git a/core/src/mindustry/core/Renderer.java b/core/src/mindustry/core/Renderer.java
index 7769d3be7687ac8db960bef392a144410a1cc124..bab0738bca0a8b40d556bc3bfe36e6794f67c748 100644
--- a/core/src/mindustry/core/Renderer.java
+++ b/core/src/mindustry/core/Renderer.java
@@ -22,6 +22,7 @@ import mindustry.maps.*;
 import mindustry.type.*;
 import mindustry.world.blocks.storage.*;
 import mindustry.world.blocks.storage.CoreBlock.*;
+import mindustryX.features.*;
 
 import static arc.Core.*;
 import static mindustry.Vars.*;
@@ -379,7 +380,7 @@ public class Renderer implements ApplicationListener{
         Events.fire(Trigger.drawOver);
         blocks.drawBlocks();
 
-        Groups.draw.draw(Drawc::draw);
+        Groups.draw.draw(RenderExt::onGroupDraw);
 
         Draw.reset();
         Draw.flush();
diff --git a/core/src/mindustryX/Hooks.java b/core/src/mindustryX/Hooks.java
index ddb597d4389659c823a28f965434ed5be233215b..c399832fd28e50e3f6464380fca916cf5539d213 100644
--- a/core/src/mindustryX/Hooks.java
+++ b/core/src/mindustryX/Hooks.java
@@ -2,6 +2,8 @@ package mindustryX;
 
 import arc.*;
 import arc.util.*;
+import mindustry.*;
+import mindustryX.features.*;
 
 import java.net.*;
 
@@ -9,6 +11,9 @@ public class Hooks implements ApplicationListener{
     @Override
     public void init(){
         Log.infoTag("MindustryX", "Hooks.init");
+        if(!Vars.headless){
+            RenderExt.init();
+        }
     }
 
     @SuppressWarnings("unused")//call before arc.util.Http$HttpRequest.block
diff --git a/core/src/mindustryX/features/RenderExt.java b/core/src/mindustryX/features/RenderExt.java
new file mode 100644
index 0000000000000000000000000000000000000000..b080177aeea03fb54f34d77cfddc0222bc80d6bb
--- /dev/null
+++ b/core/src/mindustryX/features/RenderExt.java
@@ -0,0 +1,21 @@
+package mindustryX.features;
+
+import arc.*;
+import mindustry.game.EventType.*;
+import mindustry.gen.*;
+
+public class RenderExt{
+    public static void init(){
+        Events.run(Trigger.preDraw, () -> {
+        });
+        Events.run(Trigger.draw, RenderExt::draw);
+    }
+
+    private static void draw(){
+
+    }
+
+    public static void onGroupDraw(Drawc t){
+        t.draw();
+    }
+}
