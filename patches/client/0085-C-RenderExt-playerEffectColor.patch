From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Sat, 15 Jun 2024 13:57:02 +0800
Subject: [PATCH] C(RenderExt) playerEffectColor

---
 core/src/mindustryX/features/ArcOld.java    | 12 +++++++++++-
 core/src/mindustryX/features/RenderExt.java |  1 +
 2 files changed, 12 insertions(+), 1 deletion(-)

diff --git a/core/src/mindustryX/features/ArcOld.java b/core/src/mindustryX/features/ArcOld.java
index 3cafd2e7f08c2ad7c9528a914df7eab1bdec9e87..855c5dad204db7796043e9c9c159a3c39d9795a3 100644
--- a/core/src/mindustryX/features/ArcOld.java
+++ b/core/src/mindustryX/features/ArcOld.java
@@ -127,7 +127,17 @@ public class ArcOld{
             c.sliderPref("rtsWoundUnit", 0, 0, 100, 2, s -> s + "%");
 
             c.addCategory("arcPlayerEffect");
-            c.textPref("playerEffectColor", "ffd37f");
+            {
+                Cons<String> changed = (t) -> {
+                    try{
+                        RenderExt.playerEffectColor = Color.valueOf(t);
+                    }catch(Exception e){
+                        RenderExt.playerEffectColor = Pal.accent;
+                    }
+                };
+                c.textPref("playerEffectColor", "ffd37f", changed);
+                changed.get(settings.getString("playerEffectColor"));
+            }
             c.sliderPref("unitTargetType", 0, 0, 5, 1, s -> switch(s){
                 case 0 -> "关闭";
                 case 1 -> "虚圆";
diff --git a/core/src/mindustryX/features/RenderExt.java b/core/src/mindustryX/features/RenderExt.java
index ac0ebc4e161570f3a5f8a3c0717fb7459f5d5f04..7dd8cea136898d7800142e6f5b9e54c87f1c5877 100644
--- a/core/src/mindustryX/features/RenderExt.java
+++ b/core/src/mindustryX/features/RenderExt.java
@@ -43,6 +43,7 @@ public class RenderExt{
 
     public static boolean unitHide = false;
     public static Color massDriverLineColor = Color.clear;
+    public static Color playerEffectColor = Color.clear;
 
     private static Effect placementEffect;
 
