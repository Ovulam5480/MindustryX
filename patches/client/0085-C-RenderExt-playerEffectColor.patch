From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Sat, 15 Jun 2024 13:57:02 +0800
Subject: [PATCH] C(RenderExt) playerEffectColor

---
 core/src/mindustryX/features/ArcOld.java    | 12 +++++++++++-
 core/src/mindustryX/features/RenderExt.java |  1 +
 2 files changed, 12 insertions(+), 1 deletion(-)

diff --git a/core/src/mindustryX/features/ArcOld.java b/core/src/mindustryX/features/ArcOld.java
index ad69511c62759552d9611ed901d0ef8bc4accbc8..17009f955dd1f407bdfa3c9731daba67df6388d2 100644
--- a/core/src/mindustryX/features/ArcOld.java
+++ b/core/src/mindustryX/features/ArcOld.java
@@ -127,7 +127,17 @@ public class ArcOld{
             c.sliderPref("rtsWoundUnit", 0, 0, 100, 2, s -> s + "%");
 
             c.addCategory("arcPlayerEffect");
-            c.textPref("playerEffectColor", "ffd37f");
+            {
+                Cons<String> changed = (t) -> {
+                    try{
+                        RenderExt.playerEffectColor = Color.valueOf(t);
+                    }catch(Exception e){
+                        RenderExt.playerEffectColor = Pal.accent;
+                    }
+                };
+                c.textPref("playerEffectColor", "ffd37f", changed);
+                changed.get(settings.getString("playerEffectColor"));
+            }
             c.sliderPref("unitTargetType", 0, 0, 5, 1, s -> switch(s){
                 case 0 -> "关闭";
                 case 1 -> "虚圆";
diff --git a/core/src/mindustryX/features/RenderExt.java b/core/src/mindustryX/features/RenderExt.java
index 038ce925395842f49a603c6b226c3210b0370543..e499bbee122b00d8a094df477924677a91b50323 100644
--- a/core/src/mindustryX/features/RenderExt.java
+++ b/core/src/mindustryX/features/RenderExt.java
@@ -42,6 +42,7 @@ public class RenderExt{
 
     public static boolean unitHide = false;
     public static Color massDriverLineColor = Color.clear;
+    public static Color playerEffectColor = Color.clear;
 
     private static Effect placementEffect;
 
