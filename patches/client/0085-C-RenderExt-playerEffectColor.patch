From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Sat, 15 Jun 2024 13:57:02 +0800
Subject: [PATCH] C(RenderExt) playerEffectColor

---
 core/src/mindustryX/features/ArcOld.java    | 12 +++++++++++-
 core/src/mindustryX/features/RenderExt.java |  1 +
 2 files changed, 12 insertions(+), 1 deletion(-)

diff --git a/core/src/mindustryX/features/ArcOld.java b/core/src/mindustryX/features/ArcOld.java
index bdae0373b7a37c73f60a5d9a6ad19285ad68a9f5..d498b911575861c53dcefe39434c3593fa594a4c 100644
--- a/core/src/mindustryX/features/ArcOld.java
+++ b/core/src/mindustryX/features/ArcOld.java
@@ -127,7 +127,17 @@ public class ArcOld{
             c.sliderPref("rtsWoundUnit", 0, 0, 100, 2, s -> s + "%");
 
             c.addCategory("arcPlayerEffect");
-            c.textPref("playerEffectColor", "ffd37f");
+            {
+                Cons<String> changed = (t) -> {
+                    try{
+                        RenderExt.playerEffectColor = Color.valueOf(t);
+                    }catch(Exception e){
+                        RenderExt.playerEffectColor = Pal.accent;
+                    }
+                };
+                c.textPref("playerEffectColor", "ffd37f", changed);
+                changed.get(settings.getString("playerEffectColor"));
+            }
             c.sliderPref("unitTargetType", 0, 0, 5, 1, s -> switch(s){
                 case 0 -> "关闭";
                 case 1 -> "虚圆";
diff --git a/core/src/mindustryX/features/RenderExt.java b/core/src/mindustryX/features/RenderExt.java
index 6095f9a83f0d5ed190d5f814972570dfa2678b98..f90dc699fdf4e83af3011322042315a081f9f2bc 100644
--- a/core/src/mindustryX/features/RenderExt.java
+++ b/core/src/mindustryX/features/RenderExt.java
@@ -43,6 +43,7 @@ public class RenderExt{
 
     public static boolean unitHide = false;
     public static Color massDriverLineColor = Color.clear;
+    public static Color playerEffectColor = Color.clear;
 
     private static Effect placementEffect;
 
