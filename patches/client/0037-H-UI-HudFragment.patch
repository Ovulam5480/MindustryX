From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Sat, 4 May 2024 15:43:58 +0800
Subject: [PATCH] H(UI): HudFragment
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

AuxiliaryTools, NewCoreItemsDisplay(新制核心资源显示), WaveInfoDisplay(波次信息显示)
---
 .../mindustry/ui/fragments/HudFragment.java   | 19 ++++++++++++++++++-
 1 file changed, 18 insertions(+), 1 deletion(-)

diff --git a/core/src/mindustry/ui/fragments/HudFragment.java b/core/src/mindustry/ui/fragments/HudFragment.java
index 9e26012834bf8d958d0a436616fb653256858f66..4cd802d1000f7e9498543f1c5f5161bd2fd03113 100644
--- a/core/src/mindustry/ui/fragments/HudFragment.java
+++ b/core/src/mindustry/ui/fragments/HudFragment.java
@@ -123,6 +123,9 @@ public class HudFragment{
             .touchable(Touchable.disabled)
             .style(Styles.outlineLabel)
             .name("position");
+            if(Core.settings.getInt("AuxiliaryTable") == 3){
+                t.row().add(UIExt.auxiliaryTools);
+            }
             t.top().right();
         });
 
@@ -242,6 +245,10 @@ public class HudFragment{
 
             wavesMain.row();
 
+            if(Core.settings.getInt("AuxiliaryTable") == 2){
+                wavesMain.add(UIExt.auxiliaryTools).left().top().row();
+            }
+
             addInfoTable(wavesMain.table().width(dsize * 5f + 4f).left().get());
 
             editorMain.name = "editor";
@@ -268,6 +275,11 @@ public class HudFragment{
             }).width(dsize * 5 + 4f);
             editorMain.visible(() -> shown && state.isEditor());
 
+            //map info/nextwave display
+            if(Core.settings.getInt("AuxiliaryTable") == 1){
+                cont.add(UIExt.auxiliaryTools).left().top();
+            }
+
             //fps display
             cont.table(info -> {
                 info.name = "fps/ping";
@@ -317,7 +329,12 @@ public class HudFragment{
 
             t.table(c -> {
                 //core items
-                c.top().collapser(coreItems, () -> Core.settings.getBool("coreitems") && !mobile && shown).fillX().row();
+                //MDTX: replace coreItems with UIExt.coreItems, keep but invisible for compatibility.
+                c.top().collapser(coreItems, () -> true).fillX().visible(false).row();
+                c.top().add(UIExt.coreItems).touchable(Touchable.disabled).fillX().row();
+
+                //MDTX: add waveInfoDisplay
+                c.add(UIExt.waveInfoDisplay.wrapped()).fillX().row();
 
                 float notifDuration = 240f;
                 float[] coreAttackTime = {0};
