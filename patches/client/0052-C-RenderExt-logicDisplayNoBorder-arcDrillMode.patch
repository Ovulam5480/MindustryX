From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Tue, 9 Apr 2024 22:28:36 +0800
Subject: [PATCH] =?UTF-8?q?C(RenderExt)=20logicDisplayNoBorder(=E6=98=BE?=
 =?UTF-8?q?=E7=A4=BA=E5=B1=8F=E6=97=A0=E8=BE=B9=E6=A1=86),arcDrillMode(?=
 =?UTF-8?q?=E8=BD=AC=E5=A4=B4=E6=98=BE=E7=A4=BA=E7=89=A9=E5=93=81)?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 core/src/mindustry/world/blocks/logic/LogicDisplay.java | 7 ++++++-
 core/src/mindustryX/features/RenderExt.java             | 3 +++
 2 files changed, 9 insertions(+), 1 deletion(-)

diff --git a/core/src/mindustry/world/blocks/logic/LogicDisplay.java b/core/src/mindustry/world/blocks/logic/LogicDisplay.java
index 96b504d3b549dfbae79d4e649f4313393cec807f..8d9665398a71d86da90f94a87e046a74d11a020a 100644
--- a/core/src/mindustry/world/blocks/logic/LogicDisplay.java
+++ b/core/src/mindustry/world/blocks/logic/LogicDisplay.java
@@ -12,6 +12,7 @@ import mindustry.graphics.*;
 import mindustry.ui.*;
 import mindustry.world.*;
 import mindustry.world.meta.*;
+import mindustryX.features.*;
 
 public class LogicDisplay extends Block{
     public static final byte
@@ -59,7 +60,7 @@ public class LogicDisplay extends Block{
 
         @Override
         public void draw(){
-            super.draw();
+            if(!RenderExt.logicDisplayNoBorder) super.draw();
 
             //don't even bother processing anything when displays are off.
             if(!Vars.renderer.drawDisplays) return;
@@ -122,6 +123,10 @@ public class LogicDisplay extends Block{
             Draw.blend(Blending.disabled);
             Draw.draw(Draw.z(), () -> {
                 if(buffer != null){
+                    if(RenderExt.logicDisplayNoBorder){
+                        Draw.rect(Draw.wrap(buffer.getTexture()), x, y, (buffer.getWidth() + 16) * Draw.scl, -(buffer.getHeight() + 16) * Draw.scl);
+                        return;
+                    }
                     Draw.rect(Draw.wrap(buffer.getTexture()), x, y, buffer.getWidth() * scaleFactor * Draw.scl, -buffer.getHeight() * scaleFactor * Draw.scl);
                 }
             });
diff --git a/core/src/mindustryX/features/RenderExt.java b/core/src/mindustryX/features/RenderExt.java
index 23216764d050d0fa3969a18ff54c14145da841b8..9012693e9e0c9d7951f4d9b517c37fa9c14bd170 100644
--- a/core/src/mindustryX/features/RenderExt.java
+++ b/core/src/mindustryX/features/RenderExt.java
@@ -23,6 +23,7 @@ public class RenderExt{
     public static int hiddenItemTransparency;
     public static int blockBarMinHealth;
     public static float overdriveZoneTransparency;
+    public static boolean logicDisplayNoBorder, arcDrillMode;
 
     public static boolean unitHide = false;
 
@@ -50,6 +51,8 @@ public class RenderExt{
             hiddenItemTransparency = Core.settings.getInt("HiddleItemTransparency");
             blockBarMinHealth = Core.settings.getInt("blockbarminhealth");
             overdriveZoneTransparency = Core.settings.getInt("overdrive_zone") / 100f;
+            logicDisplayNoBorder = Core.settings.getBool("arclogicbordershow");
+            arcDrillMode = Core.settings.getBool("arcdrillmode");
         });
         Events.run(Trigger.draw, RenderExt::draw);
         Events.on(TileChangeEvent.class, RenderExt::onSetBlock);
