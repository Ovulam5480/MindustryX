From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Sun, 19 May 2024 01:11:19 +0800
Subject: [PATCH] =?UTF-8?q?C:=20=E5=A2=99=E8=BD=AC=E6=94=BE=E7=BD=AE?=
 =?UTF-8?q?=E4=BF=A1=E6=81=AF=E6=98=BE=E7=A4=BA?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 .../world/blocks/production/BeamDrill.java      | 17 ++++++++---------
 1 file changed, 8 insertions(+), 9 deletions(-)

diff --git a/core/src/mindustry/world/blocks/production/BeamDrill.java b/core/src/mindustry/world/blocks/production/BeamDrill.java
index 12d4074f3a21eec91ce7313d790a14c5b89ab5ae..05f13e6c8ac4ffa84da4153a00d03f2cdd10343b 100644
--- a/core/src/mindustry/world/blocks/production/BeamDrill.java
+++ b/core/src/mindustry/world/blocks/production/BeamDrill.java
@@ -170,15 +170,14 @@ public class BeamDrill extends Block{
             );
         }
 
-        if(item != null){
-            float width = drawPlaceText(Core.bundle.formatFloat("bar.drillspeed", 60f / getDrillTime(item) * count, 2), x, y, valid);
-            if(!multiple){
-                float dx = x * tilesize + offset - width/2f - 4f, dy = y * tilesize + offset + size * tilesize / 2f + 5, s = iconSmall / 4f;
-                Draw.mixcol(Color.darkGray, 1f);
-                Draw.rect(item.fullIcon, dx, dy - 1, s, s);
-                Draw.reset();
-                Draw.rect(item.fullIcon, dx, dy, s, s);
-            }
+        //MDTX: 显性多矿物报错; 增加冷却液显示
+        if(multiple){
+            //FIXME v146 bug
+            drawPlaceText("[yellow]v146中不能同时挖掘多种矿物(BE已修复)", x, y, false);
+        }else if(item != null){
+            float speed = 60f / getDrillTime(item) * count;
+            String msg = Strings.format("@ [white]@@[] @[white]([cyan]@[])", Iconc.production, item.emoji(), item.localizedName, Strings.autoFixed(speed, 2), Strings.autoFixed(speed * optionalBoostIntensity, 2));
+            drawPlaceText(msg, x, y, valid);
         }else if(invalidItem != null){
             drawPlaceText(Core.bundle.get("bar.drilltierreq"), x, y, false);
         }
