From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Sat, 2 Mar 2024 20:04:19 +0800
Subject: [PATCH] BUILD Kotlin 1.9.20

---
 build.gradle                                   | 11 ++---------
 core/src/mindustryX/features/InternalMods.java |  6 ++++--
 gradle.properties                              |  2 +-
 3 files changed, 7 insertions(+), 12 deletions(-)

diff --git a/build.gradle b/build.gradle
index d2ed11d40ca0ded693bd8b0b74a8838f5e447a18..def9e2ae598abbe85bc4d2f0bd56d2c027941b96 100644
--- a/build.gradle
+++ b/build.gradle
@@ -26,8 +26,8 @@ buildscript{
 }
 
 plugins{
-    id "org.jetbrains.kotlin.jvm" version "1.6.0"
-    id "org.jetbrains.kotlin.kapt" version "1.6.0"
+    id "org.jetbrains.kotlin.jvm" version "1.9.20"
+    id "org.jetbrains.kotlin.kapt" version "1.9.20"
 }
 
 allprojects{
@@ -216,13 +216,6 @@ project(":core"){
         }
     }
 
-    gradle.taskGraph.whenReady{
-        //these are completely unnecessary
-        tasks.kaptGenerateStubsKotlin.onlyIf{ false }
-        tasks.compileKotlin.onlyIf{ false }
-        tasks.inspectClassesForKotlinIC.onlyIf{ false }
-    }
-
     //comp** classes are only used for code generation
     jar{
         exclude("mindustry/entities/comp/**")
diff --git a/core/src/mindustryX/features/InternalMods.java b/core/src/mindustryX/features/InternalMods.java
index 67e4cde70b0dbdc197cf8e9d5f12b5ae26172f08..609d7414566c6c5e860196d56494120997bb9be9 100644
--- a/core/src/mindustryX/features/InternalMods.java
+++ b/core/src/mindustryX/features/InternalMods.java
@@ -8,12 +8,14 @@ import mindustry.mod.Mods.*;
 import mindustryX.mods.claj.*;
 
 import static arc.Core.files;
-import static mindustry.Vars.*;
+import static mindustry.Vars.modDirectory;
 
 public class InternalMods{
     public static Seq<LoadedMod> load(){
         return Seq.with(
-        internalMod(meta("claj", "Claj联机", "1.1", "[#0096FF]xzxADIxzx cong重写 WayZer合并进MDTX"), new Claj())
+        internalMod(meta("claj", "Claj联机", "1.1", "[#0096FF]xzxADIxzx cong重写 WayZer合并进MDTX"), new Claj()),
+        internalMod(meta("Kotlin", "Kotlin语言标准库", "1.9.20", "Jetbrains"), new Mod(){
+        })
         );
     }
 
diff --git a/gradle.properties b/gradle.properties
index 6da05117a3f4abd7ae82fe2a5d766b1a847f7100..a801b0f5bf18a9cd38ca5f451cefd784b63794da 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -18,7 +18,7 @@ kapt.use.worker.api=true
 # Compilation avoidance (see https://kotlinlang.org/docs/kapt.html#compile-avoidance-for-kapt-since-1-3-20)
 kapt.include.compile.classpath=false
 # I don't need to use the kotlin stdlib, so remove it to prevent extra bloat & method count issues
-kotlin.stdlib.default.dependency=false
+#kotlin.stdlib.default.dependency=false
 #needed for android compilation
 android.useAndroidX=true
 # AGP 8 update
