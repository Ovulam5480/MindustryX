From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Wed, 2 Feb 2022 17:42:16 +0800
Subject: [PATCH] S: update TypeIO.writeRequest

---
 core/src/mindustry/io/TypeIO.java | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/core/src/mindustry/io/TypeIO.java b/core/src/mindustry/io/TypeIO.java
index c02ceb4ae69d9f7e5bea93df94c546d7a06cd1e2..c8de9a61012e3362c3f4a06af1c0237f5de120ac 100644
--- a/core/src/mindustry/io/TypeIO.java
+++ b/core/src/mindustry/io/TypeIO.java
@@ -413,8 +413,9 @@ public class TypeIO{
         if(!plan.breaking){
             write.s(plan.block.id);
             write.b((byte)plan.rotation);
-            write.b(1); //always has config
-            writeObject(write, plan.config);
+            boolean writePlan = !headless || !net.server();
+            write.b(writePlan ? 1 : 0); //always has config
+            writeObject(write, writePlan ? plan.config : null);
         }
     }
 
