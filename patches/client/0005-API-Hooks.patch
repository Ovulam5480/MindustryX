From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Wed, 3 Apr 2024 21:57:24 +0800
Subject: [PATCH] API: Hooks

---
 core/src/mindustry/ClientLauncher.java |  1 +
 core/src/mindustry/Vars.java           |  1 +
 core/src/mindustryX/Hooks.java         | 17 +++++++++++++++++
 3 files changed, 19 insertions(+)
 create mode 100644 core/src/mindustryX/Hooks.java

diff --git a/core/src/mindustry/ClientLauncher.java b/core/src/mindustry/ClientLauncher.java
index 7e0757047006ed5d6e8b1165124b7de90a8e037d..87c1dfce278bdc123ee761d8e1e16c2b883d2c8a 100644
--- a/core/src/mindustry/ClientLauncher.java
+++ b/core/src/mindustry/ClientLauncher.java
@@ -170,6 +170,7 @@ public abstract class ClientLauncher extends ApplicationCore implements Platform
         add(ui = new UI());
         add(netServer = new NetServer());
         add(netClient = new NetClient());
+        add(new mindustryX.Hooks());
 
         assets.load(schematics);
 
diff --git a/core/src/mindustry/Vars.java b/core/src/mindustry/Vars.java
index ec34503e16c87ab34dcdba33e7e89d8f644048c6..ae716151e019fa61af85b99583d3bc8dba9a3e18 100644
--- a/core/src/mindustry/Vars.java
+++ b/core/src/mindustry/Vars.java
@@ -259,6 +259,7 @@ public class Vars implements Loadable{
     }
 
     public static void init(){
+        mindustryX.Hooks.beforeInit();
         Groups.init();
 
         if(loadLocales){
diff --git a/core/src/mindustryX/Hooks.java b/core/src/mindustryX/Hooks.java
new file mode 100644
index 0000000000000000000000000000000000000000..499a9f3403c6769288ad44e7fb4a68ffb36bc591
--- /dev/null
+++ b/core/src/mindustryX/Hooks.java
@@ -0,0 +1,17 @@
+package mindustryX;
+
+import arc.*;
+import arc.util.*;
+
+public class Hooks implements ApplicationListener{
+    /** invoke before `Vars.init`. Note that may be executed from `Vars.loadAsync` */
+    public static void beforeInit(){
+        Log.infoTag("MindustryX", "Hooks.beforeInit");
+    }
+
+    /** invoke after loading, just before `Mod::init` */
+    @Override
+    public void init(){
+        Log.infoTag("MindustryX", "Hooks.init");
+    }
+}
