From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Sat, 2 Mar 2024 00:52:10 +0800
Subject: [PATCH] API(UIExt) TeamSelectDialog

---
 core/src/mindustryX/features/UIExt.java       |  4 ++
 .../features/ui/TeamSelectDialog.java         | 51 +++++++++++++++++++
 2 files changed, 55 insertions(+)
 create mode 100644 core/src/mindustryX/features/ui/TeamSelectDialog.java

diff --git a/core/src/mindustryX/features/UIExt.java b/core/src/mindustryX/features/UIExt.java
index 1d5ca9e1bd544ddd4b749036f68512e9833e8e67..d73cc555f9dfd3b4248707351e1ecfd6c261e686 100644
--- a/core/src/mindustryX/features/UIExt.java
+++ b/core/src/mindustryX/features/UIExt.java
@@ -5,11 +5,15 @@ import arc.scene.ui.*;
 import arc.scene.ui.layout.*;
 import arc.util.*;
 import mindustry.content.*;
+import mindustryX.features.ui.*;
 
 import static mindustry.Vars.*;
 
 public class UIExt{
+    public static TeamSelectDialog teamSelect;
+
     public static void init(){
+        teamSelect = new TeamSelectDialog();
     }
 
     public static void buildPositionRow(Table tt, Vec2 vec){
diff --git a/core/src/mindustryX/features/ui/TeamSelectDialog.java b/core/src/mindustryX/features/ui/TeamSelectDialog.java
new file mode 100644
index 0000000000000000000000000000000000000000..a0c11ca045115a81be97fbdab2ba8c4f9f080bf7
--- /dev/null
+++ b/core/src/mindustryX/features/ui/TeamSelectDialog.java
@@ -0,0 +1,51 @@
+package mindustryX.features.ui;
+
+import arc.func.*;
+import mindustry.game.*;
+import mindustry.gen.*;
+import mindustry.ui.*;
+import mindustry.ui.dialogs.*;
+
+//move from mindustry.arcModule.ui.dialogs.TeamSelectDialog
+public class TeamSelectDialog extends BaseDialog{
+    private Boolf<Team> checked;
+    private Team lastTeam;
+    private Cons<Team> cons;
+
+    public TeamSelectDialog(){
+        super("队伍选择器");
+        cont.pane(td -> {
+            for(Team team : Team.all){
+                if(team.id % 10 == 6){
+                    td.row();
+                    td.add("队伍：" + team.id + "~" + (team.id + 9));
+                }
+                td.button(Tex.whiteui, Styles.clearTogglei, 36f, () -> {
+                    lastTeam = team;
+                    cons.get(team);
+                })
+                .checked(b -> checked.get(team)).pad(3f).size(50f).with(b -> b.getStyle().imageUpColor = team.color);
+            }
+        });
+        closeOnBack();
+        addCloseButton();
+    }
+
+    public void pickOne(Cons<Team> cons, Team selectedTeam){
+        if(selectedTeam != null) lastTeam = selectedTeam;
+        pickOne(cons);
+    }
+
+    public void pickOne(Cons<Team> cons){
+        select((t) -> t == lastTeam, (t) -> {
+            hide();
+            cons.get(t);
+        });
+    }
+
+    public void select(Boolf<Team> checked, Cons<Team> cons){
+        this.checked = checked;
+        this.cons = cons;
+        show();
+    }
+}
